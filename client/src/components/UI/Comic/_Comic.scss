.comic {
	position: relative;
	border: 1px solid $colour-grey-c;
	background-color: $colour-white;
	@include boxShadow(4px, 4px, 2px, #00000022);
	@include borderRadius(2px);

	.comic-inner {
		position: relative;

		> img {
			@include absoluteCover;
			@include noSelect;
		}

		&.view-only {
			cursor: pointer;
		}
		
		.dialogue {
			position: absolute;
			background-color: transparent;
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			@include borderRadius(4px);

			&.edit-empty {
				cursor: text;
				border: 1px solid $colour-grey-b;
			}

			&.edit-invalid {
				border: 1px solid $colour-red-a;
			}

			> * {				
				max-height: 100%;
				width: 100%;
				margin: 0;
				padding: 0;
				border: none;
				font-family: Arial, Helvetica, sans-serif;
				overflow: hidden;
				text-align: center;
				background-color: transparent;
			}

			textarea {
				resize: none;
				outline: none;

				-webkit-box-shadow: none;
				-moz-box-shadow: none;
				box-shadow: none;
			}
		}

		.comic-footer {
			position: absolute;
			bottom: 0;
			width: 100%;
			display: flex;
			flex-direction: row;

			.comic-footer-inner {
				flex: 1;
				display: flex;
				flex-direction: row;
				align-items: flex-end;
				color: $colour-grey-b;

				.comic-link {
					text-align: left;
				}

				.comic-title {
					text-align: right;
				}
			}
		}

		.begin-edit-overlay {
			@include absoluteCover;
			display: flex;
			flex-direction: row;
			align-items: center;
			justify-content: center;
		}

		// Scaling code
		$comic-width: 1080px;
		$comic-height: 1080px;
		$comic-dialogue-line-height: 40px;
		$comic-dialogue-font-size: 38px;
	
		$comic-footer-font-size: 20px;
		$comic-footer-margin: 8px;
	
		$comic-scale-xs: 0.28;
		$comic-scale-sm: 0.36;
		$comic-scale-md: 0.44;
		$comic-scale-lg: 0.5;
	
		@mixin scaleComic ($comic-scale) {
			width: calc(#{$comic-width} * #{$comic-scale});
			height: calc(#{$comic-width} * #{$comic-scale});
			.dialogue {
				> * {
					line-height: calc(#{$comic-dialogue-line-height} * #{$comic-scale});
					font-size: calc(#{$comic-dialogue-font-size} * #{$comic-scale});
				}
			}
			
			.comic-footer-inner {
				font-size: calc(#{$comic-footer-font-size} * #{$comic-scale});
				line-height: calc(#{$comic-footer-font-size} * #{$comic-scale});
				padding: 0 calc(#{$comic-footer-margin} * #{$comic-scale});
			}
		}
	
		@include scaleComic($comic-scale-xs);
	
		@include oversm {
			@include scaleComic($comic-scale-sm);
		}
	
		@include overmd {
			@include scaleComic($comic-scale-md);
		}
	
		@include overlg {
			@include scaleComic($comic-scale-lg);
		}
	}

	.comic-lower {
		padding: $spacing-xs;
		display: flex;
		flex-direction: column;
		justify-content: stretch;

		> * {
			flex: 1;

			&:not(:first-child) {
				margin-top: $spacing-sm;
			}
		}

		.edit-toolbar {
			display: flex;
			flex-direction: row;
		}

		.comic-lower-inner {
			display: flex;
			flex-direction: row;
			align-items: center;
		}

		.do-better-panel {
			.button {
				margin-top: $spacing-xs;
			}
		}

		&:empty {
			display: none;
		}
	}
}